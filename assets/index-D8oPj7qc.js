import{r as p,j as e,A as L,U as I,L as z,H as $,W as C,S as v,M as R,P as ae,Z as w,T as Ne,B as we,a as y,C as V,b as re,c as Y,d as q,e as A,f as le,O as D,F as oe,g as ne,h as ie,D as de,i as ce,k as Z,l as ye,G as xe,m as Se,n as me,o as ke,p as ze,q as _e,s as Ce,t as K,u as Ee,v as Pe,w as Ae,x as Me,R as Le}from"./vendor-BPrx70Me.js";import{C as U,A as F,W as Q,a as $e,P as Re,b as Te,p as Oe,l as ee,s as Ue}from"./game-engine-Cfb3Y3js.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}})();const Ie="modulepreload",De=function(s,l){return new URL(s,l).href},te={},He=function(l,r,o){let a=Promise.resolve();if(r&&r.length>0){const d=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),t=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=De(c,o),c in te)return;te[c]=!0;const x=c.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(!!o)for(let m=d.length-1;m>=0;m--){const g=d[m];if(g.href===c&&(!x||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${b}`))return;const u=document.createElement("link");if(u.rel=x?"stylesheet":Ie,x||(u.as="script"),u.crossOrigin="",u.href=c,t&&u.setAttribute("nonce",t),document.head.appendChild(u),x)return new Promise((m,g)=>{u.addEventListener("load",m),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function n(d){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=d,window.dispatchEvent(i),!i.defaultPrevented)throw d}return a.then(d=>{for(const i of d||[])i.status==="rejected"&&n(i.reason);return l().catch(n)})},Be=({onStart:s,onAchievements:l,onLibrary:r,onPowerUp:o,stats:a})=>{const[n,d]=p.useState("MAIN");return n==="CHAR_SELECT"?e.jsx("div",{className:"absolute inset-0 flex flex-col items-center bg-slate-950 z-50 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-6xl w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-slate-800 pb-4 sticky top-0 bg-slate-950 z-20 py-4",children:[e.jsxs("button",{onClick:()=>d("MAIN"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[e.jsx(L,{size:20})," Back"]}),e.jsx("h2",{className:"text-4xl text-red-500 fantasy-font",children:"Select Survivor"}),e.jsx("div",{className:"w-16"})," "]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-8",children:U.map(i=>{const t=i.isUnlocked(a),c=t?i.color:"#334155",x=t?`${i.color}40`:"transparent";return e.jsxs("button",{onClick:()=>t&&s(i.id),disabled:!t,className:`relative group text-left rounded-xl overflow-hidden border-2 transition-all duration-300 ${t?"hover:-translate-y-1 hover:shadow-2xl":"opacity-70 cursor-not-allowed grayscale-[0.8]"}`,style:{borderColor:c,backgroundColor:"#0f172a",boxShadow:t?`0 0 15px ${x}`:"none"},children:[t&&e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300 pointer-events-none",style:{background:`linear-gradient(135deg, ${i.color} 0%, transparent 100%)`}}),e.jsxs("div",{className:"relative p-5 z-10 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-2xl font-bold fantasy-font leading-none mb-1 ${t?"text-slate-100":"text-slate-500"}`,children:i.name}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-widest ${t?"opacity-80":"text-slate-600"}`,style:{color:t?i.color:void 0},children:i.title})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg border-2 shadow-inner flex items-center justify-center bg-slate-800 shrink-0",style:{borderColor:t?i.color:"#334155"},children:t?e.jsx(I,{style:{color:i.color}}):e.jsx(z,{className:"text-slate-600"})})]}),e.jsx("div",{className:"flex-1 mb-6",children:t?e.jsxs("p",{className:"text-slate-400 text-sm italic leading-relaxed border-l-2 border-slate-700 pl-3",children:['"',i.description,'"']}):e.jsxs("div",{className:"bg-red-950/40 border border-red-900/30 p-3 rounded flex items-start gap-3 mt-2",children:[e.jsx(z,{size:16,className:"text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-red-400 text-[10px] font-bold uppercase",children:"Locked"}),e.jsx("p",{className:"text-red-200/70 text-xs font-medium",children:i.unlockCondition})]})]})}),e.jsxs("div",{className:"bg-slate-950/60 rounded p-3 grid grid-cols-2 gap-2 text-xs border border-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",title:"Max Health",children:[e.jsx($,{size:14,className:t?"text-red-500":"text-slate-600"}),e.jsxs("span",{className:"font-mono",children:[i.baseStats.maxHp," HP"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",title:"Movement Speed",children:[e.jsx(C,{size:14,className:t?"text-blue-400":"text-slate-600"}),e.jsxs("span",{className:"font-mono",children:[i.baseStats.speed," Spd"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",title:"Might",children:[e.jsx(v,{size:14,className:t?"text-orange-500":"text-slate-600"}),e.jsxs("span",{className:"font-mono",children:[Math.round(i.baseStats.might*100),"% Dmg"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",title:"Area",children:[e.jsx(R,{size:14,className:t?"text-cyan-500":"text-slate-600"}),e.jsxs("span",{className:"font-mono",children:[Math.round(i.baseStats.area*100),"% Area"]})]})]}),t&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-20 pointer-events-none",children:e.jsx("div",{className:"bg-black/60 backdrop-blur-sm px-6 py-2 rounded border border-white/20 text-white font-bold tracking-widest shadow-xl transform scale-90 group-hover:scale-100 transition-transform",children:"START"})})]})]},i.id)})})]})}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/90 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-red-900/20 via-slate-900 to-black pointer-events-none"}),e.jsx("h1",{className:"text-6xl md:text-8xl text-red-600 fantasy-font mb-2 drop-shadow-[0_0_15px_rgba(220,38,38,0.8)] text-center animate-pulse",children:"CRIMSON SURVIVOR"}),e.jsx("p",{className:"text-slate-500 font-mono mb-12 text-sm tracking-[0.5em] uppercase",children:"The Night is Endless"}),e.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs z-10",children:[e.jsxs("button",{onClick:()=>d("CHAR_SELECT"),className:"group flex items-center justify-center gap-3 px-8 py-4 bg-red-800 hover:bg-red-700 text-white rounded border border-red-600 transition-all hover:scale-105 shadow-[0_0_20px_rgba(220,38,38,0.4)]",children:[e.jsx(ae,{size:24,className:"group-hover:fill-current"}),e.jsx("span",{className:"font-bold text-xl tracking-wider",children:"START GAME"})]}),e.jsxs("button",{onClick:o,className:"flex items-center justify-center gap-2 px-4 py-3 bg-yellow-900/40 hover:bg-yellow-900/60 text-yellow-200 rounded border border-yellow-700/50 transition-all hover:text-white hover:scale-105",children:[e.jsx(w,{size:20,className:"fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-bold text-lg tracking-wider",children:"POWER UP"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-slate-800 hover:bg-slate-700 text-slate-200 rounded border border-slate-600 transition-all hover:text-white",children:[e.jsx(Ne,{size:18}),e.jsx("span",{className:"font-bold text-sm tracking-wider",children:"RECORDS"})]}),e.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-slate-800 hover:bg-slate-700 text-slate-200 rounded border border-slate-600 transition-all hover:text-white",children:[e.jsx(we,{size:18}),e.jsx("span",{className:"font-bold text-sm tracking-wider",children:"LIBRARY"})]})]})]}),e.jsxs("div",{className:"mt-16 text-slate-500 text-sm flex gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(y,{size:16,className:"mb-1"}),e.jsxs("span",{children:[a.totalKills.toLocaleString()," KILLS"]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(I,{size:16,className:"mb-1"}),e.jsxs("span",{children:[U.filter(i=>i.isUnlocked(a)).length," / ",U.length," CHARS"]})]})]})]})},se=(s,l=!1)=>{if(l)switch(s){case"spinach":return e.jsx(y,{size:18,className:"text-red-400"});case"empty_tome":return e.jsx(A,{size:18,className:"text-yellow-400"});case"candelabrador":return e.jsx(R,{size:18,className:"text-cyan-400"});case"bracer":return e.jsx(C,{size:18,className:"text-slate-300"});case"clover":return e.jsx(q,{size:18,className:"text-green-400"});case"wings":return e.jsx(C,{size:18,className:"text-slate-200"});case"attractorb":return e.jsx(Y,{size:18,className:"text-blue-400"});case"pummarola":return e.jsx($,{size:18,className:"text-pink-400"});case"duplicator":return e.jsx(re,{size:18,className:"text-indigo-400"});default:return e.jsx(V,{size:18,className:"text-white"})}switch(s){case"shadow_bolt":return e.jsx(w,{size:18,className:"text-indigo-400"});case"umbral_barrage":return e.jsx(w,{size:18,className:"text-purple-400 drop-shadow-[0_0_5px_rgba(168,85,247,0.8)]"});case"obsidian_shard":return e.jsx(y,{size:18,className:"text-slate-400"});case"spectral_shield":return e.jsx(ce,{size:18,className:"text-cyan-400"});case"corrosive_aura":return e.jsx(V,{size:18,className:"text-lime-400"});case"thunder_strike":return e.jsx(w,{size:18,className:"text-fuchsia-400"});case"plasma_cutter":return e.jsx(D,{size:18,className:"text-orange-400"});case"blood_siphon":return e.jsx(de,{size:18,className:"text-red-500"});case"frost_nova":return e.jsx(ie,{size:18,className:"text-cyan-300"});case"whirling_axe":return e.jsx(ne,{size:18,className:"text-yellow-600"});case"flame_breath":return e.jsx(oe,{size:18,className:"text-orange-500"});case"void_trap":return e.jsx(V,{size:18,className:"text-purple-800"});case"ricochet_blade":return e.jsx(v,{size:18,className:"text-slate-300"});case"vortex_orb":return e.jsx(D,{size:18,className:"text-violet-600"});case"inferno_grenade":return e.jsx(le,{size:18,className:"text-red-600"});case"phantom_daggers":return e.jsx(v,{size:18,className:"text-slate-200"});default:return e.jsx(v,{size:18,className:"text-white"})}},Ge=({player:s,score:l,time:r,flavorText:o})=>{if(!s)return null;const a=Math.floor(r/60),n=r%60,d=`${a.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`,i=s.xp/s.nextLevelXp*100,t=s.hp/s.maxHp*100,c=6,x=s.weapons.slice(0,c),b=Array(Math.max(0,c-x.length)).fill(null),f=s.passives.slice(0,c),u=Array(Math.max(0,c-f.length)).fill(null);return e.jsxs("div",{className:"absolute inset-0 pointer-events-none p-4 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start w-full",children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"bg-slate-900/90 p-2 rounded-br-xl border-l-4 border-b border-r border-t-0 shadow-lg flex items-center gap-3 pr-6",style:{borderColor:s.color},children:[e.jsx("div",{className:"w-10 h-10 rounded border-2 border-slate-700 bg-slate-800 flex items-center justify-center text-xl font-bold font-mono",style:{color:s.color,borderColor:`${s.color}60`},children:s.level}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-wider",children:"Survivor Level"}),e.jsx("div",{className:"w-32 h-2 bg-slate-800 rounded-full overflow-hidden mt-1",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${i}%`}})})]})]})}),e.jsx("div",{className:"flex flex-col items-center pt-2",children:e.jsxs("div",{className:"bg-gradient-to-b from-black/80 to-transparent px-8 pb-4 rounded-b-xl",children:[e.jsx("h1",{className:"text-4xl font-bold fantasy-font text-slate-100 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)] tracking-widest",children:d}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-500 font-mono font-bold mt-1 drop-shadow-md bg-black/40 px-3 py-0.5 rounded-full text-sm border border-red-900/30",children:[e.jsx(y,{size:14}),e.jsx("span",{children:l.toLocaleString()})]})]})}),e.jsxs("div",{className:"flex flex-col items-end gap-1 pointer-events-auto",children:[e.jsxs("div",{className:"flex gap-1 mb-1",children:[x.map((m,g)=>e.jsxs("div",{className:"group relative w-10 h-10 bg-slate-900/90 border border-slate-600 rounded shadow-lg flex items-center justify-center cursor-help",children:[e.jsx("div",{className:"absolute -top-1 -right-1 bg-black border border-slate-600 text-white text-[9px] w-4 h-4 flex items-center justify-center rounded-full font-bold z-10",children:m.level}),e.jsx("div",{className:"opacity-90",children:se(m.id,!1)}),m.cooldownTimer>0&&e.jsx("div",{className:"absolute inset-0 bg-black/60 origin-bottom animate-pulse",style:{height:`${m.cooldownTimer/m.cooldown*100}%`}}),e.jsxs("div",{className:"absolute right-full top-0 mr-3 w-48 p-3 bg-slate-950/95 border border-slate-600 rounded-lg shadow-xl hidden group-hover:block z-50 text-left backdrop-blur-md animate-in fade-in slide-in-from-right-2 duration-200",children:[e.jsxs("h4",{className:"text-sm font-bold text-yellow-400 mb-1 flex justify-between items-center",children:[m.name,e.jsxs("span",{className:"text-[10px] text-slate-500 bg-slate-900 px-1.5 py-0.5 rounded border border-slate-800",children:["LVL ",m.level]})]}),e.jsx("div",{className:"h-px w-full bg-slate-800 mb-2"}),e.jsx("p",{className:"text-[11px] text-slate-300 leading-relaxed font-medium",children:m.description}),e.jsxs("div",{className:"mt-2 text-[10px] text-slate-500 font-mono flex gap-2",children:[e.jsxs("span",{children:["DMG: ",Math.round(m.damage)]}),e.jsxs("span",{children:["CD: ",(m.cooldown/60).toFixed(1),"s"]})]})]})]},`w-${g}`)),b.map((m,g)=>e.jsx("div",{className:"w-10 h-10 bg-black/40 border border-slate-800 rounded flex items-center justify-center",children:e.jsx("div",{className:"w-1 h-1 rounded-full bg-slate-800"})},`we-${g}`))]}),e.jsxs("div",{className:"flex gap-1",children:[f.map((m,g)=>e.jsxs("div",{className:"group relative w-8 h-8 bg-slate-900/90 border border-slate-700 rounded shadow-lg flex items-center justify-center cursor-help",children:[e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-black border border-slate-700 text-slate-300 text-[8px] w-3 h-3 flex items-center justify-center rounded-full font-bold z-10",children:m.level}),e.jsx("div",{className:"opacity-80",children:se(m.id,!0)}),e.jsxs("div",{className:"absolute right-full bottom-0 mr-3 w-40 p-3 bg-slate-950/95 border border-slate-700 rounded-lg shadow-xl hidden group-hover:block z-50 text-left backdrop-blur-md animate-in fade-in slide-in-from-right-2 duration-200",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-300 mb-1 flex justify-between items-center",children:[m.name,e.jsxs("span",{className:"text-[9px] text-slate-500",children:["LVL ",m.level]})]}),e.jsx("div",{className:"h-px w-full bg-slate-800 mb-2"}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed",children:m.description})]})]},`p-${g}`)),u.map((m,g)=>e.jsx("div",{className:"w-8 h-8 bg-black/20 border border-slate-900 rounded flex items-center justify-center",children:e.jsx("div",{className:"w-1 h-1 rounded-full bg-slate-900"})},`pe-${g}`))]})]})]}),o&&e.jsx("div",{className:"absolute top-32 left-1/2 -translate-x-1/2 bg-black/70 text-purple-200 px-8 py-3 rounded border border-purple-900/50 backdrop-blur animate-in slide-in-from-top-4 fade-in duration-500 text-center max-w-lg shadow-[0_0_30px_rgba(147,51,234,0.2)]",children:e.jsxs("span",{className:"fantasy-font italic text-xl tracking-wide",children:['"',o,'"']})}),e.jsx("div",{className:"self-center w-full max-w-xl mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-4 top-1/2 -translate-y-1/2 z-10 bg-slate-900 border-2 border-red-900 rounded-full p-1.5 shadow-lg",children:e.jsx("div",{className:`w-3 h-3 rounded-full bg-red-500 ${t<30?"animate-ping":""}`})}),e.jsxs("div",{className:"w-full h-5 bg-slate-950 rounded-full border border-slate-700 overflow-hidden relative shadow-lg",children:[e.jsx("div",{className:"h-full transition-all duration-200 ease-out relative",style:{width:`${t}%`,backgroundColor:t<30?"#ef4444":s.color,boxShadow:`0 0 10px ${s.color}`},children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-[50%] bg-white/20"})}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-[10px] font-bold text-white/90 drop-shadow-md tracking-wider font-mono",children:[Math.ceil(s.hp)," / ",Math.ceil(s.maxHp)," HP"]})]})]})})]})},We=({upgrades:s,onSelect:l})=>e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-slate-900 border-2 border-yellow-600/50 rounded-lg p-8 max-w-4xl w-full shadow-2xl shadow-yellow-900/20",children:[e.jsx("h2",{className:"text-4xl text-center text-yellow-500 fantasy-font mb-2 drop-shadow-lg",children:"Level Up!"}),e.jsx("p",{className:"text-center text-slate-400 mb-8 italic",children:"Choose your destiny..."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map(r=>{const o=r.rarity==="legendary";return e.jsxs("button",{onClick:()=>l(r),className:`group relative border p-6 rounded transition-all duration-200 text-left flex flex-col gap-2 ${o?"bg-purple-900/40 border-purple-500 hover:bg-purple-900/60 shadow-[0_0_20px_rgba(168,85,247,0.3)] hover:scale-105":"bg-slate-800 border-slate-600 hover:bg-slate-700 hover:border-yellow-500 hover:-translate-y-1"}`,children:[e.jsx("div",{className:`absolute -inset-0.5 rounded blur transition duration-500 ${o?"bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 opacity-50 group-hover:opacity-75 animate-pulse":"bg-gradient-to-r from-yellow-600 to-purple-600 opacity-0 group-hover:opacity-30"}`}),o&&e.jsxs("div",{className:"absolute -top-3 -right-3 bg-purple-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg flex items-center gap-1 animate-bounce z-10",children:[e.jsx(Z,{size:12})," EVOLUTION"]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:`text-xl font-bold ${o?"text-purple-100 group-hover:text-purple-50":"text-yellow-100 group-hover:text-yellow-400"}`,children:r.name}),e.jsx("span",{className:`text-xs uppercase tracking-wider font-bold ${o?"text-purple-300":r.rarity==="rare"?"text-blue-400":"text-slate-500"}`,children:r.rarity}),e.jsx("p",{className:`text-sm mt-2 leading-relaxed ${o?"text-purple-200":"text-slate-300"}`,children:r.description})]})]},r.id)})})]})}),Ve=({onResume:s,onQuit:l,stats:r})=>{const o=Math.floor(r.time/60),a=r.time%60,n=`${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`;return e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border-2 border-slate-700 p-8 rounded-lg shadow-2xl max-w-md w-full relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-red-900 to-transparent opacity-50"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-red-900 to-transparent opacity-50"}),e.jsx("h2",{className:"text-4xl text-white fantasy-font text-center mb-2 tracking-widest drop-shadow-md",children:"PAUSED"}),e.jsx("div",{className:"h-px w-24 bg-slate-600 mx-auto mb-6"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 text-center text-slate-300 font-mono text-sm bg-slate-950/50 p-4 rounded border border-slate-800",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-slate-500 text-xs uppercase",children:"Time"}),e.jsx("span",{className:"text-lg text-yellow-500",children:n})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-slate-500 text-xs uppercase",children:"Level"}),e.jsx("span",{className:"text-lg text-blue-500",children:r.level})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-slate-500 text-xs uppercase",children:"Kills"}),e.jsx("span",{className:"text-lg text-red-500",children:r.kills})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("button",{onClick:s,className:"group flex items-center justify-center gap-3 w-full py-4 bg-red-900/80 hover:bg-red-800 text-white rounded border border-red-700 hover:border-red-500 transition-all shadow-lg",children:[e.jsx(ae,{size:20,className:"fill-white group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"font-bold tracking-wider",children:"RESUME GAME"})]}),e.jsx("div",{className:"h-px bg-slate-800 w-full my-1"}),e.jsxs("button",{onClick:l,className:"flex items-center justify-center gap-3 w-full py-3 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded border border-slate-700 transition-all",children:[e.jsx(ye,{size:20}),e.jsx("span",{className:"font-bold tracking-wider",children:"QUIT TO MENU"})]})]}),e.jsx("p",{className:"text-center text-slate-600 text-xs mt-6 italic",children:'"Rest while you can, survivor."'})]})})},Fe=({rewards:s,gold:l,onClose:r})=>{const[o,a]=p.useState("DROP"),[n,d]=p.useState([]);p.useEffect(()=>{if(o==="DROP"){const t=setTimeout(()=>a("SHAKE"),600);return()=>clearTimeout(t)}if(o==="SHAKE"){const t=setTimeout(()=>{a("OPEN"),i()},1200);return()=>clearTimeout(t)}if(o==="OPEN"){const t=setTimeout(()=>a("REVEAL"),1500);return()=>clearTimeout(t)}},[o]);const i=()=>{const t=[];for(let c=0;c<40;c++){const x=Math.random()*Math.PI*2,b=150+Math.random()*150;t.push({id:c,tx:Math.cos(x)*b,ty:Math.sin(x)*b,color:Math.random()>.3?"#fbbf24":"#ffffff"})}d(t)};return e.jsxs("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:[e.jsx("style",{children:`
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        @keyframes beams {
            0% { opacity: 0; transform: scale(0.5) rotate(0deg); }
            20% { opacity: 1; }
            100% { opacity: 0; transform: scale(2) rotate(180deg); }
        }
        @keyframes particle {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0); opacity: 0; }
        }
        .chest-shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both infinite; }
        .beam-effect { animation: beams 1.5s ease-out forwards; }
        .particle-effect { animation: particle 1s ease-out forwards; }
      `}),e.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-2xl p-8 relative",children:[o==="OPEN"&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[e.jsx("div",{className:"absolute w-[800px] h-[800px] bg-gradient-conic from-yellow-500/0 via-yellow-500/30 to-yellow-500/0 beam-effect rounded-full blur-xl z-0"}),n.map(t=>e.jsx("div",{className:"absolute top-1/2 left-1/2 w-3 h-3 rounded-full particle-effect z-10",style:{backgroundColor:t.color,"--tx":`${t.tx}px`,"--ty":`${t.ty}px`}},t.id))]}),o!=="REVEAL"?e.jsxs("div",{className:`relative transition-all duration-300 transform 
                ${o==="DROP"?"scale-0 opacity-0 translate-y-[-100px] animate-in slide-in-from-top duration-500 fade-in zoom-in":"scale-125 opacity-100"}
                ${o==="SHAKE"?"chest-shake":""}
            `,children:[e.jsxs("div",{className:"w-64 h-48 relative",children:[e.jsxs("div",{className:"absolute bottom-0 w-full h-3/4 bg-gradient-to-b from-amber-800 to-amber-950 rounded-b-xl border-4 border-amber-600 shadow-2xl z-10 overflow-hidden",children:[e.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-6 bg-amber-600 border-x border-amber-900/50"}),e.jsx("div",{className:"absolute right-8 top-0 bottom-0 w-6 bg-amber-600 border-x border-amber-900/50"}),e.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-10 h-10 bg-black/40 rounded-full blur-[2px]"})]}),e.jsxs("div",{className:`absolute top-0 w-full h-2/5 bg-gradient-to-b from-amber-700 to-amber-900 rounded-t-xl border-4 border-b-0 border-amber-500 z-20 origin-bottom transition-transform duration-300 ease-out
                         ${o==="OPEN"?"-rotate-[120deg] -translate-y-12":"rotate-0"}
                     `,children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-gradient-to-r from-transparent via-amber-400/10 to-transparent"}),e.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-6 bg-amber-600 border-x border-amber-900/50"}),e.jsx("div",{className:"absolute right-8 top-0 bottom-0 w-6 bg-amber-600 border-x border-amber-900/50"}),e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 w-12 h-14 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded border-2 border-yellow-200 shadow-lg z-30 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-6 bg-black rounded-full"})})]}),e.jsx("div",{className:`absolute top-1/2 left-4 right-4 h-2 bg-yellow-200 blur-md transition-opacity duration-300 z-15 ${o==="OPEN"?"opacity-100":"opacity-0"}`})]}),o==="OPEN"&&e.jsx("div",{className:"absolute inset-0 bg-white animate-ping opacity-50 z-50 rounded-xl"})]}):e.jsxs("div",{className:"w-full flex flex-col items-center animate-in zoom-in duration-500",children:[e.jsx("h2",{className:"text-6xl text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-yellow-600 fantasy-font mb-4 drop-shadow-[0_0_15px_rgba(234,179,8,0.5)] tracking-widest",children:"TREASURE!"}),e.jsx("div",{className:"bg-gradient-to-r from-slate-900/80 via-yellow-900/30 to-slate-900/80 border-y border-yellow-700/50 w-full py-4 mb-8 flex justify-center",children:e.jsxs("div",{className:"bg-yellow-950/80 border border-yellow-600 rounded-full px-8 py-2 text-yellow-200 flex items-center gap-3 shadow-[0_0_10px_rgba(234,179,8,0.3)]",children:[e.jsx(xe,{className:"text-yellow-400 fill-yellow-400/20",size:20}),e.jsxs("span",{className:"font-bold text-xl tracking-wide",children:["+",l," Gold"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 w-full mb-10",children:[s.map((t,c)=>e.jsxs("div",{className:"group bg-slate-800/80 border-2 border-yellow-600/60 p-5 rounded-xl flex items-center gap-5 shadow-2xl animate-in slide-in-from-bottom-8 fade-in duration-700 fill-mode-backwards hover:border-yellow-400 transition-colors",style:{animationDelay:`${c*300}ms`},children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-500 blur opacity-20 group-hover:opacity-40 transition-opacity"}),e.jsx("div",{className:"bg-slate-900 p-4 rounded-full border border-yellow-700 relative z-10",children:e.jsx(Z,{className:"text-yellow-400",size:28})})]}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"text-2xl font-bold text-yellow-100 mb-1",children:t.name}),e.jsx("p",{className:"text-yellow-200/60 font-mono text-sm",children:t.description})]}),e.jsx("div",{className:"text-xs uppercase font-bold text-green-300 bg-green-900/40 px-3 py-1.5 rounded border border-green-500/30",children:"LEVEL UP"})]},c)),s.length===0&&e.jsx("div",{className:"text-center text-slate-500 italic p-4 border border-slate-800 rounded",children:"The chest contained only gold..."})]}),e.jsxs("button",{onClick:r,className:"group bg-gradient-to-r from-yellow-700 to-yellow-600 hover:from-yellow-600 hover:to-yellow-500 text-white font-bold py-4 px-16 rounded-lg shadow-[0_0_30px_rgba(202,138,4,0.3)] transition-all hover:scale-105 hover:shadow-[0_0_50px_rgba(202,138,4,0.5)] flex items-center gap-3 border border-yellow-400/30",children:[e.jsx(Se,{size:28,className:"group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-xl",children:"CLAIM REWARDS"})]})]})]})]})},Ke={blue:"text-blue-400 hover:border-blue-500/50",green:"text-green-400 hover:border-green-500/50",red:"text-red-400 hover:border-red-500/50",yellow:"text-yellow-400 hover:border-yellow-500/50",purple:"text-purple-400 hover:border-purple-500/50",emerald:"text-emerald-400 hover:border-emerald-500/50",orange:"text-orange-400 hover:border-orange-500/50",cyan:"text-cyan-400 hover:border-cyan-500/50"},k=({label:s,value:l,icon:r,color:o})=>{const a=Ke[o],n=a.split(" ")[0],d=a.split(" ")[1];return e.jsxs("div",{className:`bg-slate-900 border border-slate-800 p-4 rounded-lg flex items-center gap-4 transition-colors ${d}`,children:[e.jsx("div",{className:`p-3 rounded-full bg-slate-950 border border-slate-800 ${n}`,children:r}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs uppercase font-bold tracking-wider",children:s}),e.jsx("p",{className:"text-xl font-bold text-slate-200 font-mono",children:l})]})]})},Qe=({stats:s,onBack:l})=>{const r=F.length,o=F.filter(x=>x.condition(s)).length,a=Math.round(o/r*100),n=s.gamesPlayed>0?Math.floor(s.totalTime/s.gamesPlayed):0,d=Math.floor(n/60),i=n%60,t=Math.floor(s.totalTime/3600),c=Math.floor(s.totalTime%3600/60);return e.jsx("div",{className:"absolute inset-0 flex flex-col items-center bg-slate-950 z-50 p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-5xl w-full",children:[e.jsxs("button",{onClick:l,className:"mb-8 flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[e.jsx(L,{size:20})," Back to Menu"]}),e.jsx("h2",{className:"text-4xl text-yellow-500 fantasy-font mb-6 border-b border-slate-800 pb-4",children:"Grim Records"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-12",children:[e.jsx(k,{label:"Games Played",value:s.gamesPlayed,icon:e.jsx(me,{size:20}),color:"blue"}),e.jsx(k,{label:"Total Playtime",value:`${t}h ${c}m`,icon:e.jsx(ke,{size:20}),color:"cyan"}),e.jsx(k,{label:"Avg. Survival",value:`${d}m ${i}s`,icon:e.jsx(A,{size:20}),color:"green"}),e.jsx(k,{label:"Completion",value:`${a}%`,icon:e.jsx(ze,{size:20}),color:"yellow"}),e.jsx(k,{label:"Total Kills",value:s.totalKills.toLocaleString(),icon:e.jsx(y,{size:20}),color:"red"}),e.jsx(k,{label:"Best Kill Streak",value:(s.maxKills||0).toLocaleString(),icon:e.jsx(_e,{size:20}),color:"orange"}),e.jsx(k,{label:"Gems Collected",value:(s.totalGems||0).toLocaleString(),icon:e.jsx(xe,{size:20}),color:"emerald"}),e.jsx(k,{label:"Bosses Slain",value:s.bossesKilled,icon:e.jsx(y,{size:20}),color:"purple"})]}),e.jsxs("h3",{className:"text-2xl text-slate-300 fantasy-font mb-4 flex items-center gap-2",children:["Achievements ",e.jsxs("span",{className:"text-sm font-sans text-slate-500 bg-slate-900 px-2 py-1 rounded-full border border-slate-800",children:[o," / ",r]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-8",children:F.map(x=>{const b=x.condition(s);return e.jsxs("div",{className:`p-6 rounded-lg border ${b?"bg-slate-900 border-yellow-600/50 shadow-[0_0_15px_rgba(202,138,4,0.1)]":"bg-slate-900/50 border-slate-800 opacity-60"} flex items-center gap-4 transition-all`,children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-3xl bg-slate-800 border ${b?"border-yellow-500 text-yellow-500":"border-slate-700 text-slate-600"}`,children:b?x.icon:e.jsx(z,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-xl font-bold ${b?"text-yellow-100":"text-slate-400"}`,children:x.title}),e.jsx("p",{className:"text-slate-400 text-sm",children:x.description})]}),b&&e.jsx(Ce,{className:"text-green-500"})]},x.id)})})]})})},Ye=s=>{switch(s){case"spinach":return e.jsx(y,{size:24,className:"text-red-400"});case"empty_tome":return e.jsx(A,{size:24,className:"text-yellow-400"});case"candelabrador":return e.jsx(R,{size:24,className:"text-cyan-400"});case"bracer":return e.jsx(C,{size:24,className:"text-slate-300"});case"clover":return e.jsx(q,{size:24,className:"text-green-400"});case"wings":return e.jsx(C,{size:24,className:"text-slate-200"});case"attractorb":return e.jsx(Y,{size:24,className:"text-blue-400"});case"pummarola":return e.jsx($,{size:24,className:"text-pink-400"});case"duplicator":return e.jsx(re,{size:24,className:"text-indigo-400"});default:return e.jsx(w,{size:24,className:"text-white"})}},qe=s=>{switch(s){case"spinach":return"#f87171";case"empty_tome":return"#facc15";case"candelabrador":return"#22d3ee";case"bracer":return"#cbd5e1";case"clover":return"#4ade80";case"wings":return"#e2e8f0";case"attractorb":return"#60a5fa";case"pummarola":return"#f472b6";case"duplicator":return"#818cf8";default:return"#94a3b8"}},Ze=(s,l)=>{if(!l)return e.jsx(z,{size:24,className:"text-slate-500"});switch(s){case"shadow_bolt":return e.jsx(w,{size:24,className:"text-indigo-400"});case"obsidian_shard":return e.jsx(y,{size:24,className:"text-slate-400"});case"spectral_shield":return e.jsx(ce,{size:24,className:"text-cyan-400"});case"corrosive_aura":return e.jsx(y,{size:24,className:"text-lime-400"});case"thunder_strike":return e.jsx(w,{size:24,className:"text-fuchsia-400"});case"plasma_cutter":return e.jsx(D,{size:24,className:"text-orange-400"});case"blood_siphon":return e.jsx(de,{size:24,className:"text-red-500"});case"frost_nova":return e.jsx(ie,{size:24,className:"text-cyan-300"});case"whirling_axe":return e.jsx(ne,{size:24,className:"text-yellow-600"});case"flame_breath":return e.jsx(oe,{size:24,className:"text-orange-500"});case"void_trap":return e.jsx(me,{size:24,className:"text-purple-800"});case"ricochet_blade":return e.jsx(v,{size:24,className:"text-slate-300"});case"vortex_orb":return e.jsx(D,{size:24,className:"text-violet-600"});case"inferno_grenade":return e.jsx(le,{size:24,className:"text-red-600"});case"phantom_daggers":return e.jsx(v,{size:24,className:"text-slate-200"});default:return e.jsx(v,{size:24,className:"text-white"})}},Xe=(s,l)=>{if(s==="amount")return`+${l} Amount`;if(s==="recovery")return`+${l} HP/sec`;const r=s.replace(/([A-Z])/g," $1").replace(/^./,o=>o.toUpperCase());return`+${Math.round(l*100)}% ${r}`},Je={shadow_bolt:{dmg:15,cd:"0.8s",type:"Projectile",note:"Nearest Target"},obsidian_shard:{dmg:35,cd:"1.3s",type:"Lobbed",note:"High Arc"},spectral_shield:{dmg:15,cd:"3.0s",type:"Orbital",note:"Defensive"},corrosive_aura:{dmg:5,cd:"0.5s",type:"Aura",note:"Damage Zone"},thunder_strike:{dmg:50,cd:"1.5s",type:"Instant",note:"Random Target"},plasma_cutter:{dmg:25,cd:"1.0s",type:"Wave",note:"Infinite Pierce"},blood_siphon:{dmg:10,cd:"1.2s",type:"Projectile",note:"Heals Player"},frost_nova:{dmg:10,cd:"3.0s",type:"Area",note:"Freezes Enemies"},whirling_axe:{dmg:20,cd:"2.0s",type:"Spiral",note:"Expanding Orbit"},flame_breath:{dmg:8,cd:"1.5s",type:"Cone",note:"Short Range"},void_trap:{dmg:4,cd:"3.3s",type:"Trap",note:"Lingering Zone"},ricochet_blade:{dmg:15,cd:"1.2s",type:"Projectile",note:"Bounces"},vortex_orb:{dmg:5,cd:"3.0s",type:"Projectile",note:"Pull Effect"},inferno_grenade:{dmg:40,cd:"1.6s",type:"Lobbed",note:"Explodes"},phantom_daggers:{dmg:15,cd:"0.8s",type:"Projectile",note:"Rear Fire"},umbral_barrage:{dmg:25,cd:"0.7s",type:"Barrage",note:"Massive Dmg"}},et=({stats:s,onBack:l})=>{const[r,o]=p.useState("CHARACTERS");return e.jsx("div",{className:"absolute inset-0 flex flex-col items-center bg-slate-950 z-50 p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-5xl w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-slate-800 pb-4",children:[e.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[e.jsx(L,{size:20})," Back to Menu"]}),e.jsx("h2",{className:"text-4xl text-yellow-500 fantasy-font",children:"Library"}),e.jsx("div",{className:"w-24"})," "]}),e.jsxs("div",{className:"flex gap-4 mb-8 justify-center flex-wrap",children:[e.jsxs("button",{onClick:()=>o("CHARACTERS"),className:`px-6 py-2 rounded flex items-center gap-2 font-bold transition-all ${r==="CHARACTERS"?"bg-red-800 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[e.jsx(I,{size:18})," Survivors"]}),e.jsxs("button",{onClick:()=>o("WEAPONS"),className:`px-6 py-2 rounded flex items-center gap-2 font-bold transition-all ${r==="WEAPONS"?"bg-red-800 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[e.jsx(v,{size:18})," Arsenal"]}),e.jsxs("button",{onClick:()=>o("PASSIVES"),className:`px-6 py-2 rounded flex items-center gap-2 font-bold transition-all ${r==="PASSIVES"?"bg-red-800 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[e.jsx(Z,{size:18})," Passives"]})]}),r==="CHARACTERS"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4 fade-in duration-300",children:U.map(a=>{var t;const n=a.isUnlocked(s),d=n?a.color:"#334155",i=n?`${a.color}40`:"transparent";return e.jsxs("div",{className:"relative group rounded-xl overflow-hidden border-2 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl",style:{borderColor:d,backgroundColor:"#0f172a",boxShadow:n?`0 0 20px ${i}`:"none"},children:[n&&e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{background:`linear-gradient(135deg, ${a.color} 0%, transparent 100%)`}}),e.jsxs("div",{className:"relative p-5 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"w-16 h-16 rounded-full shadow-lg border-2 border-slate-700 flex items-center justify-center text-2xl relative overflow-hidden",style:{backgroundColor:n?a.color:"#1e293b"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/40 to-transparent"}),e.jsx("div",{className:"relative z-10",children:n?e.jsx(I,{className:"text-white/50"}):e.jsx(z,{className:"text-slate-500"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-2xl font-bold fantasy-font ${n?"text-white":"text-slate-500"}`,children:a.name}),e.jsx("p",{className:`text-xs font-bold uppercase tracking-wider ${n?"text-white/60":"text-slate-600"}`,children:a.title})]})]}),n?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-slate-400 text-sm italic mb-6 min-h-[40px] leading-relaxed border-l-2 border-slate-700 pl-3",children:['"',a.description,'"']}),e.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-3 grid grid-cols-2 gap-y-3 gap-x-4 mb-4 border border-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-300",title:"Max Health",children:[e.jsx($,{size:14,className:"text-red-500"}),e.jsxs("span",{className:"font-mono",children:[a.baseStats.maxHp," HP"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-300",title:"Movement Speed",children:[e.jsx(C,{size:14,className:"text-blue-400"}),e.jsxs("span",{className:"font-mono",children:[a.baseStats.speed," Speed"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-300",title:"Damage Multiplier",children:[e.jsx(v,{size:14,className:"text-orange-500"}),e.jsxs("span",{className:`font-mono ${a.baseStats.might!==1?"text-orange-300 font-bold":""}`,children:[Math.round(a.baseStats.might*100),"% Might"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-300",title:"Area Multiplier",children:[e.jsx(R,{size:14,className:"text-cyan-500"}),e.jsxs("span",{className:`font-mono ${a.baseStats.area!==1?"text-cyan-300 font-bold":""}`,children:[Math.round(a.baseStats.area*100),"% Area"]})]}),a.baseStats.cooldownReduction>0&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400 font-bold col-span-2",children:[e.jsx(A,{size:14}),e.jsxs("span",{className:"font-mono",children:["-",Math.round(a.baseStats.cooldownReduction*100),"% Cooldowns"]})]})]}),e.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-800 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-500 font-bold uppercase",children:"Starting Weapon"}),e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 font-bold text-sm bg-yellow-900/10 px-2 py-1 rounded border border-yellow-900/30",children:[e.jsx(v,{size:14}),((t=Q[a.startingWeaponId])==null?void 0:t.name)||"Unknown"]})]})]}):e.jsxs("div",{className:"mt-6 p-4 bg-slate-950/80 rounded border border-red-900/30 text-center flex flex-col items-center justify-center min-h-[140px]",children:[e.jsx(z,{className:"mb-3 text-slate-700",size:32}),e.jsx("p",{className:"text-red-900/80 font-bold uppercase text-xs mb-2",children:"Locked Condition"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:a.unlockCondition})]})]})]},a.id)})}),r==="WEAPONS"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4 fade-in duration-300",children:Object.entries(Q).map(([a,n])=>{const d=n.unlockCondition(s),i=Je[a],t=$e[a.replace(/_([a-z])/g,b=>b[1].toUpperCase())]||"#64748b",c=d?t:"#334155",x=d?`${t}40`:"transparent";return e.jsxs("div",{className:"relative group rounded-xl overflow-hidden border-2 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl",style:{borderColor:c,backgroundColor:"#0f172a",boxShadow:d?`0 0 20px ${x}`:"none"},children:[d&&e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{background:`linear-gradient(135deg, ${t} 0%, transparent 100%)`}}),e.jsxs("div",{className:"relative p-5 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"w-16 h-16 rounded-lg shadow-lg border-2 border-slate-700 flex items-center justify-center text-2xl relative overflow-hidden bg-slate-800",style:{borderColor:d?t:"#334155"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/40 to-transparent"}),e.jsx("div",{className:"relative z-10",children:Ze(a,d)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-bold fantasy-font ${d?"text-slate-200":"text-slate-600"}`,children:n.name}),d&&i&&e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:i.type})]})]}),d?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 min-h-[40px]",children:n.description}),i&&e.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-3 grid grid-cols-2 gap-y-3 gap-x-4 border border-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-300",title:"Base Damage",children:[e.jsx(v,{size:14,className:"text-red-500"}),e.jsxs("span",{className:"font-mono text-red-200",children:[i.dmg," Dmg"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-300",title:"Cooldown",children:[e.jsx(A,{size:14,className:"text-yellow-500"}),e.jsxs("span",{className:"font-mono text-yellow-200",children:[i.cd," CD"]})]}),i.note&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400 font-bold col-span-2 bg-emerald-950/30 p-1.5 rounded border border-emerald-900/50",children:[e.jsx(w,{size:14}),e.jsx("span",{children:i.note})]})]})]}):e.jsxs("div",{className:"mt-6 p-4 bg-slate-950/80 rounded border border-red-900/30 text-center flex flex-col items-center justify-center min-h-[140px]",children:[e.jsx(z,{className:"mb-3 text-slate-700",size:32}),e.jsx("p",{className:"text-red-900/80 font-bold uppercase text-xs mb-2",children:"Locked"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:n.unlockText})]})]})]},a)})}),r==="PASSIVES"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4 fade-in duration-300",children:Object.entries(Re).map(([a,n])=>{const d=qe(a),i=`${d}40`;return e.jsxs("div",{className:"relative group rounded-xl overflow-hidden border-2 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl",style:{borderColor:d,backgroundColor:"#0f172a",boxShadow:`0 0 20px ${i}`},children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{background:`linear-gradient(135deg, ${d} 0%, transparent 100%)`}}),e.jsxs("div",{className:"relative p-5 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"w-16 h-16 rounded-lg shadow-lg border-2 border-slate-700 flex items-center justify-center text-2xl relative overflow-hidden bg-slate-800",style:{borderColor:d},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/40 to-transparent"}),e.jsx("div",{className:"relative z-10",children:Ye(a)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold fantasy-font text-slate-200",children:n.name}),e.jsxs("div",{className:"text-xs text-slate-500 font-mono bg-slate-950/50 px-2 py-0.5 rounded border border-slate-800 inline-block mt-1",children:["Max Level: ",n.maxLevel]})]})]}),e.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 min-h-[40px]",children:n.description}),e.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-3 border border-slate-800/50",children:[e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase mb-1 tracking-wider",children:"Per Level Bonus"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{size:14,className:"text-emerald-500 rotate-90"}),e.jsx("p",{className:"text-sm font-mono text-emerald-400 font-bold",children:Xe(n.stat,n.increase)})]})]})]})]},a)})})]})})},tt=s=>{switch(s){case"might":return"#ef4444";case"maxHp":return"#b91c1c";case"recovery":return"#f472b6";case"cooldownReduction":return"#facc15";case"area":return"#06b6d4";case"speed":return"#3b82f6";case"growth":return"#10b981";case"greed":return"#fbbf24";case"luck":return"#4ade80";case"magnet":return"#818cf8";default:return"#94a3b8"}},st=(s,l=24)=>{switch(s){case"might":return e.jsx(v,{size:l});case"maxHp":return e.jsx($,{size:l});case"recovery":return e.jsx(Ae,{size:l});case"cooldownReduction":return e.jsx(A,{size:l});case"area":return e.jsx(R,{size:l});case"speed":return e.jsx(C,{size:l});case"growth":return e.jsx(Pe,{size:l});case"greed":return e.jsx(K,{size:l});case"luck":return e.jsx(q,{size:l});case"magnet":return e.jsx(Y,{size:l});default:return e.jsx(w,{size:l})}},at=({stats:s,onBack:l,onUpdateStats:r})=>{const[o,a]=p.useState(s.gold||0),[n,d]=p.useState(s.powerUps||{}),i=t=>{const c=n[t.id]||0;if(c>=t.maxLevel)return;const x=Math.floor(t.baseCost*Math.pow(t.costMultiplier,c));if(o>=x){const b=o-x,f={...n,[t.id]:c+1};a(b),d(f);const u={...s,gold:b,powerUps:f};Oe(u),r(u)}};return e.jsx("div",{className:"absolute inset-0 flex flex-col items-center bg-slate-950 z-50 p-6 overflow-y-auto",children:e.jsxs("div",{className:"max-w-6xl w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-slate-800 pb-4 sticky top-0 bg-slate-950/95 backdrop-blur z-20 py-4 px-2",children:[e.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors group",children:[e.jsx(L,{size:20,className:"group-hover:-translate-x-1 transition-transform"})," Back"]}),e.jsx("h2",{className:"text-4xl text-yellow-500 fantasy-font drop-shadow-md",children:"Power Up Store"}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-5 py-2 rounded-full border border-yellow-700/50 shadow-[0_0_15px_rgba(234,179,8,0.2)]",children:[e.jsx(K,{className:"text-yellow-400 fill-yellow-400/20",size:20}),e.jsx("span",{className:"text-yellow-100 font-mono font-bold text-xl tracking-wide",children:o.toLocaleString()})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-12",children:Te.map(t=>{const c=n[t.id]||0,x=c>=t.maxLevel,b=Math.floor(t.baseCost*Math.pow(t.costMultiplier,c)),f=o>=b,u=tt(t.statKey),m=`${u}40`;return e.jsxs("div",{className:"relative group rounded-xl overflow-hidden border-2 transition-all duration-300 hover:-translate-y-1 bg-[#0f172a] flex flex-col",style:{borderColor:x?"#334155":u,boxShadow:x?"none":`0 0 20px -5px ${m}`},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-24 opacity-20 pointer-events-none",style:{background:`linear-gradient(180deg, ${u} 0%, transparent 100%)`}}),e.jsxs("div",{className:"relative p-5 flex flex-col h-full z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"w-14 h-14 rounded-lg shadow-lg border-2 border-slate-700 flex items-center justify-center text-2xl relative overflow-hidden bg-slate-800",style:{borderColor:u,color:u},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/40 to-transparent"}),e.jsx("div",{className:"relative z-10",children:st(t.statKey,28)})]}),e.jsxs("div",{className:`text-xs font-bold px-2.5 py-1 rounded border ${x?"bg-green-900/30 border-green-700/50 text-green-400":"bg-slate-900 border-slate-700 text-slate-400"}`,children:["LVL ",c," / ",t.maxLevel]})]}),e.jsxs("div",{className:"mb-4 flex-grow",children:[e.jsx("h3",{className:`text-xl font-bold fantasy-font mb-2 ${x?"text-slate-400":"text-slate-200"}`,children:t.name}),e.jsx("p",{className:"text-sm text-slate-400 leading-relaxed min-h-[40px]",children:t.description})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-800 rounded-full overflow-hidden mb-6 border border-slate-700/50",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${c/t.maxLevel*100}%`,backgroundColor:u,boxShadow:`0 0 10px ${u}`}})}),e.jsx("button",{onClick:()=>i(t),disabled:x||!f,className:`w-full py-3.5 rounded-lg font-bold flex items-center justify-center gap-2 transition-all relative overflow-hidden group/btn ${x?"bg-slate-800 text-slate-500 cursor-default border border-slate-700":f?"text-white shadow-lg hover:scale-[1.02] active:scale-95":"bg-slate-900 text-red-400/60 cursor-not-allowed border border-red-900/20 grayscale"}`,style:!x&&f?{background:"linear-gradient(to bottom, #ca8a04, #854d0e)",borderTop:"1px solid #fde047",borderBottom:"1px solid #713f12"}:{},children:x?e.jsxs(e.Fragment,{children:[e.jsx(z,{size:16})," MAXED OUT"]}):e.jsxs(e.Fragment,{children:[f?e.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover/btn:translate-y-0 transition-transform duration-300 pointer-events-none"}):null,e.jsx(Ee,{size:18,className:f?"animate-bounce":""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:b.toLocaleString()}),e.jsx(K,{size:14,className:f?"text-yellow-200":"text-red-400/60"})]})]})})]})]},t.id)})})]})})},rt=async s=>lt(s.situation),lt=(s,l)=>{const r=o=>o[Math.floor(Math.random()*o.length)];switch(s){case"LEVEL_UP":return r(["Power surges through your veins.","The abyss gazes back, and you blink not.","Your soul grows darker, yet stronger.","Ascension is inevitable.","More power. More blood.","You are becoming something else.","The shadows bow to you.","Limitless potential unleashed.","A new plateau of strength.","The ancient seals weaken."]);case"GAME_OVER":return r(["The darkness consumes you.","Your light has faded.","Rest now, warrior.","The horde was too many.","A valiant effort, extinguished.","Return to the void.","Your journey ends here.","Dust to dust.","The night claims another.","You fought well, but the shadows won."]);case"BOSS_SPAWN":return r(["A terrible presence approaches.","The ground trembles beneath you.","Something ancient has awoken.","Prepare yourself. It is here.","A titan of the void emerges.","Death comes for you.","Face your doom!","The air grows heavy with malice.","An entity of pure dread manifests.","The master of this realm descends."]);default:return"Survive."}},ot=()=>e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-950 z-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"}),e.jsx("p",{className:"text-red-500 font-mono text-sm animate-pulse",children:"SUMMONING..."})]})}),nt=()=>{const s=p.useRef(null),l=p.useRef(null),[r,o]=p.useState(0),[a,n]=p.useState(null),[d,i]=p.useState(0),[t,c]=p.useState(0),[x,b]=p.useState([]),[f,u]=p.useState({rewards:[],gold:0}),[m,g]=p.useState(""),[T,H]=p.useState(ee()),[X,J]=p.useState(!1);p.useEffect(()=>{H(ee())},[r===0]),p.useEffect(()=>{const h=j=>{j.code==="Escape"&&(r===4?B(!0):r===5&&B(!1))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[r]);const B=h=>{l.current&&(h?(l.current.isPaused=!0,o(5)):(l.current.isPaused=!1,o(4)))},be=async h=>{if(s.current){n(null),i(0),c(0),J(!0);try{const{GameEngine:j}=await He(async()=>{const{GameEngine:_}=await import("./game-engine-Cfb3Y3js.js").then(E=>E.E);return{GameEngine:_}},[],import.meta.url);l.current&&(l.current.isGameOver=!0);const N=new j(s.current,h,_=>{b(_),o(6),G("LEVEL_UP",N)},_=>{o(7),G("GAME_OVER",N);const E=Ue(_);H(E)},()=>{G("BOSS_SPAWN",N)},()=>{pe(N)});l.current=N,N.start(),o(4),g("")}catch(j){console.error("Failed to load game engine:",j),alert("Failed to load game resources. Please refresh.")}finally{J(!1)}}},pe=h=>{const N=Math.random()<.2?3:1,_=Math.floor(Math.random()*200+100)*h.player.stats.greed,E=[],W=h.player.weapons.filter(P=>P.level<P.maxLevel);for(let P=0;P<N;P++)if(W.length>0){const ge=Math.floor(Math.random()*W.length),O=W[ge];E.push({id:`chest_upgrade_${O.id}_${Date.now()}_${P}`,name:Q[O.id].name,description:`Upgraded to Level ${O.level+1}`,rarity:"rare",type:"WEAPON",apply:je=>{const S=je.weapons.find(ve=>ve.id===O.id);S.level<S.maxLevel&&(S.level++,S.level%2===0&&(S.damage*=1.2),S.level%3===0&&(S.amount+=1),S.area*=1.1)}})}u({rewards:E,gold:Math.floor(_)}),o(8)},he=()=>{l.current&&(f.rewards.forEach(h=>h.apply(l.current.player)),l.current.goldCollected+=f.gold,l.current.isPaused=!1,o(4))},G=async(h,j)=>{const N=await rt({level:j.player.level,kills:j.score,healthPercent:j.player.hp/j.player.maxHp*100,situation:h});g(N),setTimeout(()=>g(""),4e3)};p.useEffect(()=>{let h;return(r===4||r===5||r===6||r===8)&&l.current&&(h=window.setInterval(()=>{const j=l.current;n({...j.player}),i(j.score),c(Math.floor(j.frameCount/60))},100)),()=>clearInterval(h)},[r]);const fe=h=>{l.current&&(h.apply(l.current.player),l.current.isPaused=!1,o(4))},M=()=>{l.current&&(l.current.isGameOver=!0),o(0),n(null),i(0),c(0)};return e.jsxs("div",{className:"relative w-full h-screen bg-slate-900 overflow-hidden",children:[e.jsx("canvas",{ref:s,className:"block w-full h-full"}),X&&e.jsx(ot,{}),r===0&&!X&&e.jsx(Be,{onStart:be,onAchievements:()=>o(1),onLibrary:()=>o(2),onPowerUp:()=>o(3),stats:T}),r===1&&e.jsx(Qe,{stats:T,onBack:M}),r===2&&e.jsx(et,{stats:T,onBack:M}),r===3&&e.jsx(at,{stats:T,onBack:M,onUpdateStats:h=>H(h)}),(r===4||r===5)&&e.jsx(Ge,{player:a,score:d,time:t,flavorText:m}),r===5&&a&&e.jsx(Ve,{onResume:()=>B(!1),onQuit:M,stats:{kills:d,time:t,level:a.level}}),r===6&&e.jsx(We,{upgrades:x,onSelect:fe}),r===8&&e.jsx(Fe,{rewards:f.rewards,gold:f.gold,onClose:he}),r===7&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/90 backdrop-blur z-50 animate-in zoom-in duration-500",children:[e.jsx("h2",{className:"text-6xl text-white fantasy-font mb-4 drop-shadow-lg",children:"YOU DIED"}),e.jsxs("div",{className:"text-center mb-8 bg-black/40 p-6 rounded-lg border border-red-500/30",children:[e.jsxs("p",{className:"text-2xl text-red-200 mb-2",children:["Survived: ",Math.floor(t/60),"m ",t%60,"s"]}),e.jsxs("p",{className:"text-2xl text-red-200",children:["Kills: ",d]}),e.jsxs("p",{className:"text-xl text-slate-400 mt-4",children:["Level Reached: ",(a==null?void 0:a.level)||0]}),m&&e.jsxs("p",{className:"text-lg italic text-red-300 mt-4 border-t border-red-500/20 pt-4",children:['"',m,'"']})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{onClick:M,className:"px-8 py-4 bg-white text-red-900 hover:bg-slate-200 rounded text-xl font-bold transition-all border border-red-800",children:"BACK TO MENU"})})]})]})},ue=document.getElementById("root");if(!ue)throw new Error("Could not find root element to mount to");const it=Me.createRoot(ue);it.render(e.jsx(Le.StrictMode,{children:e.jsx(nt,{})}));
